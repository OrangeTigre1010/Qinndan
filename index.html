<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Âº†Ê≤Å‰∏πÂÖ≠ÊúàÊºî‰ªÄ‰πàÊàèÔºü</title>
    <!-- ÂºïÂÖ•LeafletÂú∞ÂõæÂ∫ì -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        html, body, [class*="css"] {
            font-family: 'STZhongsong', 'SimSun', serif;
        }
        
        body {
            background-color: #ffffff;
            margin: 0;
            padding: 0;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: flex;
            gap: 20px;
        }
        
        /* ‰æßËæπÊ†èÊ†∑Âºè */
        .sidebar {
            background-color: #fff0f0;
            padding: 20px;
            border-radius: 8px;
            width: 250px;
            min-height: 1000px;
            flex-shrink: 0;
        }
        
        /* ‰∏ªÂÜÖÂÆπÂå∫Âüü */
        .main-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        /* ËΩÆÊí≠Âõæ+ÂâßÁõÆË°®ÂÆπÂô® */
        .right-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        /* ËΩÆÊí≠ÂõæÊ†∑Âºè */
        .carousel {
            position: relative;
            width: 100%;
            height: 450px;
            overflow: hidden;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .carousel-inner {
            display: flex;
            transition: transform 0.5s ease;
            height: 100%;
        }
        
        .carousel-item {
            min-width: 100%;
            height: 100%;
        }
        
        .carousel-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* Âç°ÁâáÊ†∑Âºè */
        .musical-card {
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            background-color: #fff5f5;
            border-left: 5px solid #d23c3c;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }
        
        .musical-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .musical-title {
            color: #8c1a1a;
            font-weight: bold;
            font-size: 1.5em;
            margin-bottom: 10px;
        }
        
        .theater-name {
            color: #d23c3c;
            font-weight: bold;
            font-size: 1.1em;
            margin: 8px 0;
        }
        
        /* ÊåâÈíÆÊ†∑Âºè */
        .custom-button {
            background-color: #d23c3c;
            color: white;
            border-radius: 5px;
            padding: 8px 16px;
            border: none;
            font-weight: bold;
            transition: background-color 0.3s;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            margin-top: 10px;
        }
        
        .custom-button:hover {
            background-color: #991a1a;
            color: white;
        }
        
        /* ÈÄâÈ°πÂç°Ê†∑Âºè */
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            font-weight: bold;
            color: #d23c3c;
        }
        
        .tab.active {
            color: #8c1a1a;
            border-bottom: 3px solid #d23c3c;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        select {
            width: 100%;
            height: 40px;
            font-size: 16px;
            padding: 8px;
            margin-bottom: 15px;
            border: 1px solid #ffd0d0;
            border-radius: 4px;
        }
        
        /* Ê†áÈ¢òÊ†∑Âºè */
        h1 {
            color: #8c1a1a;
            border-bottom: 2px solid #d23c3c;
            padding-bottom: 10px;
        }
        
        /* Ë°®ÂçïÊ†∑Âºè */
        input, textarea {
            border: 1px solid #ffd0d0;
            border-radius: 4px;
            width: 100%;
            padding: 8px;
            margin-bottom: 15px;
        }
        
        /* Ë°®Ê†ºÊ†∑Âºè */
        table {
            width: 100%;
            border-collapse: collapse;
            border: 1px solid #ffd0d0;
            border-radius: 8px;
            overflow: hidden;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ffd0d0;
        }
        
        th {
            background-color: #fff0f0;
            color: #8c1a1a;
        }
        
        /* ÊºîÂëò‰ªãÁªçÂç°Áâá */
        .actor-card {
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            background-color: #f8f8f8;
            border-left: 5px solid #8c1a1a;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }
        
        .actor-name {
            color: #8c1a1a;
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .flex-container {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .flex-img {
            flex: 0 0 200px;
        }
        
        .flex-content {
            flex: 1;
        }
        
        .alert {
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        
        .alert-warning {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .alert-success {
            background-color: #d4edda;
            color: #155724;
        }
        
        .alert-error {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        /* Âú∞ÂõæËßÜÂõæÂÆπÂô® */
        .map-view-container {
            display: flex;
            gap: 20px;
            width: 100%;
        }
        
        /* Âú∞ÂõæÊ†∑Âºè */
        #map {
            height: 500px;
            flex-grow: 1;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }
        
        /* ÂâßÈô¢ÂàóË°®Ê†∑Âºè */
        .theater-list-container {
            width: 300px;
            background-color: #fff0f0;
            border-radius: 8px;
            padding: 15px;
            overflow-y: auto;
            max-height: 500px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }
        
        .theater-list-container h3 {
            color: #8c1a1a;
            margin-top: 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #d23c3c;
            text-align: center;
            font-size: 1.2em;
        }
        
        .theater-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .theater-item {
            padding: 12px 15px;
            margin-bottom: 10px;
            background-color: white;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 4px solid #d23c3c;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .theater-item:hover {
            background-color: #ffecec;
            transform: translateX(5px);
        }
        
        .theater-item.active {
            background-color: #d23c3c;
            color: white;
        }
        
        .theater-item .theater-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .theater-item .performance-count {
            font-size: 0.9em;
            color: #666;
            display: flex;
            justify-content: space-between;
        }
        
        .theater-item.active .performance-count {
            color: #ddd;
        }
        
        /* Á≠õÈÄâÊåâÈíÆ */
        .filter-button {
            background-color: #d23c3c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 10px;
            width: 100%;
        }
        
        .filter-button:hover {
            background-color: #991a1a;
        }
        
        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                min-height: auto;
            }
            
            .flex-container {
                flex-direction: column;
            }
            
            .flex-img {
                flex: 0 0 auto;
                width: 100%;
            }
            
            .map-view-container {
                flex-direction: column;
            }
            
            .theater-list-container {
                width: 100%;
                max-height: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <h2>üé≠ Á≠õÈÄâÊù°‰ª∂</h2>
            
            <!-- Êó•ÊúüËåÉÂõ¥ÈÄâÊã© -->
            <label for="dateRange">ÈÄâÊã©Êó•ÊúüËåÉÂõ¥</label>
            <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                <input type="date" id="startDate" style="flex: 1;">
                <input type="date" id="endDate" style="flex: 1;">
            </div>
            
            <!-- ÂâßÈô¢ÈÄâÊã© -->
            <label for="theaters">ÈÄâÊã©ÂâßÈô¢</label>
            <select id="theaters">
                <option value="all" selected>ÂÖ®ÈÉ®ÂâßÈô¢</option>
                <option value="Â•πÂâßÂú∫">Â•πÂâßÂú∫</option>
                <option value="ÂçÅ‰∏ÄÊ•ºÂì™‰∏™ÂâßÂú∫">ÂçÅ‰∏ÄÊ•ºÂì™‰∏™ÂâßÂú∫</option>
                <option value="‰∏äÊµ∑ËåâËéâËä±ÂâßÂú∫">‰∏äÊµ∑ËåâËéâËä±ÂâßÂú∫</option>
                <option value="Âåó‰∫¨‰øùÂà©ÂâßÈô¢">Âåó‰∫¨‰øùÂà©ÂâßÈô¢</option>
                <option value="Â§ß‰∏ñÁïå">Â§ß‰∏ñÁïå</option>
                <option value="Â¢®ÂâßÂú∫">Â¢®ÂâßÂú∫</option>
            </select>
            
            <!-- Á•®‰ª∑ËåÉÂõ¥ -->
            <label for="priceRanges">ÈÄâÊã©Á•®‰ª∑ËåÉÂõ¥</label>
            <select id="priceRanges">
                <option value="all" selected>ÂÖ®ÈÉ®Á•®‰ª∑</option>
                <option value="280-1280ÂÖÉ">280-1280ÂÖÉ</option>
                <option value="180-1080ÂÖÉ">180-1080ÂÖÉ</option>
                <option value="200-880ÂÖÉ">200-880ÂÖÉ</option>
                <option value="380-1680ÂÖÉ">380-1680ÂÖÉ</option>
                <option value="180-980ÂÖÉ">180-980ÂÖÉ</option>
            </select>
            
            <!-- ÊéíÂ∫èÊñπÂºè -->
            <label for="sortBy">ÊéíÂ∫èÊñπÂºè</label>
            <select id="sortBy">
                <option value="date_asc">ÊºîÂá∫Êó•Êúü(‰ªéÊó©Âà∞Êôö)</option>
                <option value="date_desc">ÊºîÂá∫Êó•Êúü(‰ªéÊôöÂà∞Êó©)</option>
                <option value="name_asc">ÂâßÁõÆÂêçÁß∞(A-Z)</option>
                <option value="name_desc">ÂâßÁõÆÂêçÁß∞(Z-A)</option>
                <option value="theater_asc">ÂâßÈô¢ÂêçÁß∞(A-Z)</option>
                <option value="theater_desc">ÂâßÈô¢ÂêçÁß∞(Z-A)</option>
            </select>
            
            <button class="filter-button" onclick="applyFilters()">Â∫îÁî®Á≠õÈÄâ</button>
            <button class="filter-button" onclick="resetFilters()" style="background-color: #666; margin-top: 5px;">ÈáçÁΩÆÁ≠õÈÄâ</button>
            
            <hr>
            <p><strong>ÂÖ≥‰∫é</strong></p>
            <p>Êú¨Â∫îÁî®Êèê‰æõÂº†Ê≤Å‰∏πÂΩìÊúàÊºîÂá∫‰ø°ÊÅØ</p>
        </div>

        <div class="main-content">
            <!-- È°∂ÈÉ®ËΩÆÊí≠Âõæ -->
            <div class="carousel">
                <div class="carousel-inner" id="carouselInner">
                    <div class="carousel-item"><img src="https://i.imgur.com/KUOhkeq.jpeg" alt="Âº†Ê≤Å‰∏πÊºîÂá∫Êµ∑Êä•"></div>
                    <div class="carousel-item"><img src="https://i.imgur.com/3KAIyAH.jpeg" alt="Âº†Ê≤Å‰∏πÊºîÂá∫Êµ∑Êä•"></div>
                    <div class="carousel-item"><img src="https://i.imgur.com/VUZF7sX.jpeg" alt="Âº†Ê≤Å‰∏πÊºîÂá∫Êµ∑Êä•"></div>
                    <div class="carousel-item"><img src="https://i.imgur.com/wy2k5Qv.jpeg" alt="Âº†Ê≤Å‰∏πÊºîÂá∫Êµ∑Êä•"></div>
                </div>
            </div>
            
            <h1>ü•öÂº†Ê≤Å‰∏πÂÖ≠ÊúàÊºî‰ªÄ‰πàÊàèÔºü</h1>
            <p>Êü•ÁúãÁ¶ΩËõãü•öÊúÄÊñ∞ÊºîÂá∫‰ø°ÊÅØ</p>
            
            <!-- ÂÖ≥‰∫éÂº†Ê≤Å‰∏π -->
            <div class="actor-card">
                <div class="actor-name">Âº†Ê≤Å‰∏π</div>
                <div class="flex-container">
                    <div class="flex-img">
                        <img src="https://i.imgur.com/LzIVhfL.jpeg" alt="Âº†Ê≤Å‰∏π" style="width: 100%; border-radius: 8px;">
                    </div>
                    <div class="flex-content">
                        <p><strong>ËÅå‰∏öÔºö</strong>Èü≥‰πêÂâßÊºîÂëò</p>
                        <p><strong>‰ª£Ë°®‰ΩúÂìÅÔºö</strong>„Ää‰∫∫Èó¥Â§±Ê†º„Äã„Ää‰º™Ë£ÖËÄÖ2022„Äã„ÄäÁåéÁΩ™ÂõæÈâ¥„Äã„ÄäÈÅìÊûóÊ†ºÈõ∑ÁöÑÁîªÂÉè„Äã</p>
                        <p><strong>ÁÆÄ‰ªãÔºö</strong>Âº†Ê≤Å‰∏πÊòØ‰∏≠ÂõΩÊñ∞Áîü‰ª£Èü≥‰πêÂâßÊºîÂëòÔºå‰ª•ÂÖ∂ÊâéÂÆûÁöÑÂî±ÂäüÂíåÂØåÊúâÊÑüÊüìÂäõÁöÑË°®ÊºîÈ£éÊ†ºÂèóÂà∞ËßÇ‰ºóÂñúÁà±„ÄÇÊØï‰∏ö‰∫é‰∏äÊµ∑Èü≥‰πêÂ≠¶Èô¢Èü≥‰πêÂâßÁ≥ªÔºåÊõæÂá∫ÊºîÂ§öÈÉ®ÁªèÂÖ∏Èü≥‰πêÂâß‰ΩúÂìÅÔºåÂ°ëÈÄ†‰∫ÜÂ§ö‰∏™‰ª§‰∫∫Âç∞Ë±°Ê∑±ÂàªÁöÑËßíËâ≤ÂΩ¢Ë±°„ÄÇ</p>
                        <p><strong>ÊºîÂá∫ÁâπÁÇπÔºö</strong>Â£∞Èü≥Ê∏ÖÊæàÈÄè‰∫ÆÔºåË°®ÊºîÁªÜËÖªÁúüÂÆûÔºåÊìÖÈïøÂ°ëÈÄ†Â§çÊùÇÂ§öÈù¢ÁöÑÂ•≥ÊÄßËßíËâ≤„ÄÇ</p>
                    </div>
                </div>
            </div>
            
            <div class="right-section">
                <p><strong id="performanceCount">ÊâæÂà∞ 6 Âú∫ÊºîÂá∫</strong></p>
                
                <!-- ÈÄâÈ°πÂç° -->
                <div class="tabs">
                    <div class="tab active" onclick="switchTab('cardView')">Âç°ÁâáËßÜÂõæ</div>
                    <div class="tab" onclick="switchTab('tableView')">Ë°®Ê†ºËßÜÂõæ</div>
                    <div class="tab" onclick="switchTab('mapView')">Âú∞ÂõæËßÜÂõæ</div>
                </div>
                
                <!-- Âç°ÁâáËßÜÂõæ -->
                <div id="cardView" class="tab-content active">
                    <!-- Âç°ÁâáÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                </div>
                
                <!-- Ë°®Ê†ºËßÜÂõæ -->
                <div id="tableView" class="tab-content">
                    <table>
                        <thead>
                            <tr>
                                <th>ÂâßÁõÆÂêçÁß∞</th>
                                <th>ÊºîÂá∫Êó•Êúü</th>
                                <th>ÊºîÂá∫Êó∂Èó¥</th>
                                <th>ÂâßÈô¢ÂêçÁß∞</th>
                                <th>Á•®‰ª∑ËåÉÂõ¥</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                            <!-- Ë°®Ê†ºÂÜÖÂÆπÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Âú∞ÂõæËßÜÂõæ -->
                <div id="mapView" class="tab-content">
                    <h2>ÊºîÂá∫Âú∞ÁÇπÂàÜÂ∏É</h2>
                    <div class="map-view-container">
                        <div class="theater-list-container">
                            <h3>üé≠ ÂâßÈô¢ÂàóË°® üé≠</h3>
                            <ul class="theater-list" id="theaterList">
                                <!-- ÂâßÈô¢ÂàóË°®Â∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÁîüÊàê -->
                            </ul>
                        </div>
                        <div id="map"></div>
                    </div>
                </div>
            </div>
            
            <!-- ÈÅóÊºèÊºîÂá∫ÂèçÈ¶à -->
            <hr>
            <h2>ÈÅóÊºèÊºîÂá∫ÂèçÈ¶à</h2>
            <form id="addPerformance">
                <div class="flex-container">
                    <div class="flex-content">
                        <label for="title">ÂâßÁõÆÂêçÁß∞*</label>
                        <input type="text" id="title" required>
                        
                        <label for="theater">ÂâßÈô¢ÂêçÁß∞*</label>
                        <input type="text" id="theater" required>
                        
                        <label for="date">ÊºîÂá∫Êó•Êúü*</label>
                        <input type="date" id="date" required>
                    </div>
                    <div class="flex-content">
                        <label for="time">ÊºîÂá∫Êó∂Èó¥*</label>
                        <input type="time" id="time" value="19:30" required>
                        
                        <label for="price">Á•®‰ª∑ËåÉÂõ¥* (‰æãÂ¶Ç: 280-1280ÂÖÉ)</label>
                        <input type="text" id="price" required>
                        
                        <label for="link">Ë¥≠Á•®ÈìæÊé•</label>
                        <input type="url" id="link">
                    </div>
                </div>
                
                <label for="description">ÂâßÁõÆÁÆÄ‰ªã</label>
                <textarea id="description" rows="4"></textarea>
                
                <label for="poster">Êµ∑Êä•ÂõæÁâáURL</label>
                <input type="url" id="poster">
                
                <button type="button" onclick="submitForm()" class="custom-button">Êèê‰∫§ÂèçÈ¶à</button>
            </form>
            
            <!-- ÂÖ≥‰∫éÈÉ®ÂàÜ -->
            <hr>
            <p><strong>ÂÖ≥‰∫éËøô‰∏™Â∫îÁî®</strong></p>
            <ul>
                <li>Êï∞ÊçÆÊù•Ê∫ê: ÂêÑÂ§ßÂâßÈô¢ÂÆòÁΩë</li>
                <li>ÊúÄÂêéÊõ¥Êñ∞Êó∂Èó¥: <span id="updateDate"></span></li>
                <li>ÂºÄÂèëËÄÖ: ÂºµÊ≤Å‰∏πÁöÑÁãó</li>
            </ul>
        </div>
    </div>

    <!-- ÂºïÂÖ•LeafletÂú∞ÂõæÂ∫ìJS -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    
    <script>
        // ÊºîÂá∫Êï∞ÊçÆ
        const performances = [
            {
                id: 1,
                title: "ËøûÁíß",
                date: "2025-06-13",
                time: "19:30",
                theater: "Â•πÂâßÂú∫",
                price: "280-1280ÂÖÉ",
                description: "Âú®Ê°âÂüé‰∏ÄÊâãÈÅÆÂ§©ÁöÑÊùéÊ∞èÂÆ∂Êóè‰∏≠Ôºå‰∫∫‰∫∫Á∫∏ÈÜâÈáëËø∑„ÄÅ‰∫âÊùÉÂ§∫Âà©„ÄÇÈõÜÂõ¢ÂçÉÈáëÊùéÁéâÂ±è‰∏éÁ¨¨‰∏ÄÁßò‰π¶Ë∞¢ÂÆõÂÆÅÔºåÈíàÈîãÁõ∏ÂØπÊ∞¥ÁÅ´‰∏çÂÆπ„ÄÇÊõæÊòØÊåöÂèãÁöÑÂ•π‰ª¨Ôºå‰∏∫‰Ωï‰ºöÂèçÁõÆÊàê‰ªáÔºüÂãæÂøÉÊñóËßíÁöÑÂêçÂà©Âú∫‰∏äÔºåÂ•π‰ª¨ËÉΩÂê¶ÂæóÂÅøÊâÄÊÑøÔºüÊ∑±‰∏çËßÅÂ∫ïÁöÑÂëΩËøêÊº©Ê∂°‰∏≠ÔºåÂ•π‰ª¨ÂèàÊòØÂê¶ËÉΩÂ§üÁúãÊ∏ÖËá™Â∑±ÁöÑÂÜÖÂøÉÔºüÊè≠ÂºÄÂ∞òÂ∞ÅÁöÑÂæÄ‰∫ãÔºåËµ∞ËøõÈáë‰∏ùÁöÑÁâ¢Á¨ºÔºåÁßòÂØÜ‰∏éÁæÅÁªäÁöÑËàûÂè∞ÔºåÊãâÂºÄÂ∏∑Âπï„ÄÇ",
                poster: "https://i.imgur.com/So5kIsT.jpeg",
                link: "https://mp.weixin.qq.com/s/TvkxIL5pU5s8Dv9tJz9sFg",
                location: [121.481453, 31.242095] // Â•πÂâßÂú∫
            },
            {
                id: 2,
                title: "Ë∞®ÈÅµÂåªÂò±",
                date: "2025-06-14",
                time: "19:30",
                theater: "ÂçÅ‰∏ÄÊ•ºÂì™‰∏™ÂâßÂú∫",
                price: "180-1080ÂÖÉ",
                description: "‰∏≠Âπ¥È©¨ÊãâÊùæÂÖ¨ÁõäË∑ëËÄÖÈ©¨Âã§ÊÑèÂ§ñÊü•Âá∫ÊÉ†‰∏äÈòøÂ∞îÂÖπÊµ∑ÈªòÁóáÔºåÁîüÊ¥ªÊÄ•ËΩ¨ËÄå‰∏ãÔºåÂ∑•‰ΩúÂ§±Âà©ÔºåÂÆ∂Â∫≠Áì¶Ëß£Ôºå‰ªñÂâ©‰ΩôÁöÑ‰∏ÄÂçä‰∫∫ÁîüÂºÄÂßã‰∏éÂÄíÈÄÄÁöÑËÆ∞ÂøÜËµõË∑ë„ÄÇ‰ªñÂÜçÂ∫¶Ëµ∞ËÆøÈÇ£‰∫õ‰∏éËá™Â∑±ÁîüÊ¥ªÁõ∏ÂÖ≥ÁöÑ‰∫∫ÔºåÂºÄÂêØ‰∫Ü‰∏ÄÂú∫Áã¨Â±ûËá™Â∑±ÁöÑ\"Âéª‰º™Â≠òÁúü\"ÔºåÊëÜÂú®‰ªñÈù¢ÂâçÁöÑÔºåÊòØ‰∫∫ÁîüÁöÑÂèë‰ª§Êû™ÔºåÊãøËµ∑ÊàñÊîæ‰∏ãÔºåÁ≠îÊ°àÊó†‰∫∫Áü•Êôì..",
                poster: "https://i.imgur.com/oe7bnsw.jpeg",
                link: "https://mp.weixin.qq.com/s/VKNxD1aHzpBcgHOTD3kYSw",
                location: [121.484589, 31.2399] // ÂçÅ‰∏ÄÊ•ºÂì™‰∏™ÂâßÂú∫
            },
            {
                id: 3,
                title: "TRACE U",
                date: "2025-06-20",
                time: "14:00",
                theater: "‰∏äÊµ∑ËåâËéâËä±ÂâßÂú∫",
                price: "200-880ÂÖÉ",
                description: "Âú®‰∏ÄÂÆ∂Âêç‰∏∫\"Debai\"ÁöÑÊëáÊªöÈÖíÂêß‰∏≠Ôºå‰∏ªÂî±ÂêØÂ§èÂíåÂêâ‰ªñÊâãÂ∫≠ÂÆáÂõ†‰∏∫ÁÉ≠Áà±ÊëáÊªöËÄåÂçïÁ∫ØÂú∞Ê¥ªÁùÄ„ÄÇÁÑ∂ËÄåÔºå‰∏ÄÂêçÁ•ûÁßòÂ•≥Â≠êÁöÑÂá∫Áé∞Êâì‰π±‰∫Ü‰ªñ‰ª¨ÂéüÊú¨ÁÆÄÂçïÁöÑÁîüÊ¥ªÔºåÂêØÂ§èÂØπÂ•≥Â≠êÊâßÁùÄÁöÑËøΩÈÄêÂºïÂèë‰∫Ü‰ªñÂíåÂ∫≠ÂÆá‰πãÈó¥Êé•‰∫åËøû‰∏âÁöÑ‰∫âÊâß„ÄÇÈöèÁùÄ‰∏§‰∫∫ÁüõÁõæÁöÑÈÄêÊ∏êÂä†Ê∑±ÔºåÈöêËóèÂú®Êó∂Èó¥ÂíåËÆ∞ÂøÜÊ∑±Â§ÑÁöÑÁúüÁõ∏ÊÖ¢ÊÖ¢ÊòæÁé∞‰∫ÜÂá∫Êù•‚Ä¶‚Ä¶",
                poster: "https://i.imgur.com/sxaHw9y.jpeg",
                link: "https://mp.weixin.qq.com/s/yqfXa9SummO5tS75v2PkAA",
                location: [121.484995, 31.236015] // ‰∏äÊµ∑ËåâËéâËä±ÂâßÂú∫
            },
            {
                id: 4,
                title: "ÂÆùÁéâ",
                date: "2025-06-28",
                time: "20:00",
                theater: "Âåó‰∫¨‰øùÂà©ÂâßÈô¢",
                price: "380-1680ÂÖÉ",
                description: "Èü≥‰πêÂâß„ÄäÂÆùÁéâ„Äã‰ª•„ÄäÁ∫¢Ê•ºÊ¢¶„Äã‰∏≠\"ÂÆùÁéâ\"ÁöÑËßÜËßí,ÈáçÊñ∞Ëß£ÊûÑÂíåËØ†ÈáäËøô‰∏™ÊïÖ‰∫ã„ÄÇ\"ÂÆùÁéâ\"‰∏ç‰ªÖÊåáË¥æÂÆùÁéâÊàñÈÄöÁÅµÂÆùÁéâ,Êõ¥ÊòØ‰∏ÄÁßçË∫´‰ªΩ‰∏éÂëΩËøêÁöÑË±°ÂæÅ„ÄÇÂú®Êàè‰∏≠ÔºåÂÆùÁéâÊòØË¥æÂÆ∂ÁöÑÂÖ¨Â≠ê,‰πüÊòØÂ§©Âú∞Èó¥ÁöÑÈ°ΩÁü≥,‰ªñÁöÑÂëΩËøê‰ºº‰πéË¢´ÊèêÂâçÂÜôÂÆö„ÄÇÁÑ∂ËÄå,Ëøô‰∏™Â∞ëÂπ¥Âú®ÂØªÊ±ÇËá™ÊàëÁ≠îÊ°àÁöÑËøáÁ®ã‰∏≠,Ë¥®ÁñëÈ¢ÑËÆæÁöÑÂëΩËøê,ÊÑüÂèóÂπ∂ÁªèÂéÜÁà±ÊÅ®ÊÉÖ‰ªá,ÊúÄÁªàÊàê‰∏∫ÂÆåÊï¥ÁöÑ\"ÂÆùÁéâ\"„ÄÇ",
                poster: "https://i.imgur.com/Giy1xkI.jpeg",
                link: "https://mp.weixin.qq.com/s/5LfK_f-9I-tlgq3D-0kCDg",
                location: [116.442332, 39.940532] // Âåó‰∫¨‰øùÂà©ÂâßÈô¢
            },
            {
                id: 5,
                title: "LIZZIE‰∏ΩÂÖπ",
                date: "2025-06-14",
                time: "14:00",
                theater: "Â§ß‰∏ñÁïå",
                price: "280-1280ÂÖÉ",
                description: "1892Âπ¥8Êúà4Êó•Ôºå‰∏Ä‰∏™Èó∑ÁÉ≠Â§èÊó•ÁöÑÂçàÂêéÔºåÁæéÂõΩÈ©¨Â°ûËØ∏Â°ûÂ∑ûÁöÑÁ¶èÂ∞îÈáåÂºóÔºåÂêùÂï¨ÁöÑÈì∂Ë°åÂÆ∂ AndrewJackson Borden Âíå‰ªñÁöÑÁ¨¨‰∫å‰ªªÂ¶ªÂ≠ê Abby ÊÉ®Ê≠ª‰∫éÂÆ∂‰∏≠ÔºåBorden ÂÖàÁîüÁöÑ‰∫åÂ•≥ÂÑø Lizzie Andrew BordenÊàê‰∏∫‰∫ÜÂ§¥Âè∑Â´åÁñë‰∫∫„ÄÇLizzie ÁöÑÂÆ°Âà§ÂºïËµ∑‰∫ÜËΩ∞Âä®Ôºå‰πüÂ∞ÜBorden ÂÆ∂ÁöÑÂ•≥‰ªÜ BridgetLizzie ÁöÑÂßêÂßê Emma,ÂíåÈÇªÂ±Ö Alice Âç∑ÂÖ•ÂÖ∂‰∏≠„ÄÇ",
                poster: "https://i.imgur.com/medYtwb.png",
                link: "https://mp.weixin.qq.com/s/64sbDcQmHDirJzDPpvvhDA",
                location: [121.485864, 31.234196] // Â§ß‰∏ñÁïå
            },
            {
                id: 6,
                title: "ÁñØÂ≠ê‰∏éËµûÁæéËØó",
                date: "2025-06-02",
                time: "19:30",
                theater: "Â¢®ÂâßÂú∫",
                price: "180-980ÂÖÉ",
                description: "ÂàöÂá∫Áã±ÁöÑÊùéÈªòÂú®ÈôåÁîüÁöÑÁéØÂ¢É‰∏≠Êó†Ê≥ïËûçÂÖ•Á§æ‰ºöÔºåË∫´‰ΩìÁöÑÈ••È•øÂíåÂÜÖÂøÉÁöÑÊÄØÊá¶ËÆ©‰ªñÂ§áÂèóÁÖéÁÜ¨Ôºå‰ªñÁ™ÅÁÑ∂ÂºÄÂßãÊÄÄÂøµÁõëÁã±ÈáåÂº∫ËßÑÂàôÁöÑÁîüÊ¥ªÔºåÊâÄ‰ª•ÊùéÈªòÊâìÁÆóÈáçÂõû‰ªñÁöÑÂÆâÂÖ®Âå∫‚Äî‚ÄîÁõëÁã±„ÄÇ‰ΩÜÂΩì‰ªñÊïÖÊÑè\"ÁäØÁΩ™\"ÁöÑÊó∂ÂÄôÔºåÂç¥ÈÅáÂà∞‰∫Ü‰∏é‰ªñÊÉ≥Ê≥ïÊà™ÁÑ∂Áõ∏ÂèçÔºå‰∏∫‰∫ÜËøΩÊ±ÇÂåÖÁî±ÂíåÊ¢¶ÊÉ≥ÔºåÁõ∏ÂØπÂÆâÂÖ®ÁöÑÂåªÈô¢ÈáåÈÄÉÁ¶ªÁöÑÁñØÂ≠ê„ÄÇÂú®ÁñØÂ≠êÁöÑ\"ÂìÑÈ™ó\"‰∏ãÔºå‰∫å‰∫∫Áªì‰º¥ËÄåË°åÔºå‰∏çÁü•‰∏çËßâ‰∏≠ÔºåÊùéÈªò‰πüÂ≠¶‰ºö‰∫ÜÁñØÂ≠ê\"Á≤æÁ•ûËÉúÂà©Ê≥ï\"Ëøô‰∏ÄÂ•óÁêÜËÆ∫,Âπ∂Â∞ÜÂÖ∂‰ªòËØ∏ÂÆûË∑µ„ÄÇ",
                poster: "https://i.imgur.com/peYTYbc.jpeg",
                link: "https://www.dahepiao.com/news1/yanchu/20231031428269.html",
                location: [121.481453, 31.242095] // Â¢®ÂâßÂú∫
            }
        ];

        // ÂâßÈô¢‰ΩçÁΩÆ‰ø°ÊÅØ
        const theaterLocations = {
            "Â•πÂâßÂú∫": [121.481453, 31.242095],
            "ÂçÅ‰∏ÄÊ•ºÂì™‰∏™ÂâßÂú∫": [121.484589, 31.2399],
            "‰∏äÊµ∑ËåâËéâËä±ÂâßÂú∫": [121.484995, 31.236015],
            "Âåó‰∫¨‰øùÂà©ÂâßÈô¢": [116.442332, 39.940532],
            "Â§ß‰∏ñÁïå": [121.485864, 31.234196],
            "Â¢®ÂâßÂú∫": [121.481453, 31.242095]
        };

        // Âú∞ÂõæÂíåÊ†áËÆ∞Áõ∏ÂÖ≥ÂèòÈáè
        let map;
        let markers = {};
        let activeTheater = null;

        // ÂàùÂßãÂåñÂú∞Âõæ
        function initMap() {
            // ÂàõÂª∫Âú∞ÂõæÔºåÂàùÂßãËßÜÂõæËÆæÁΩÆ‰∏∫‰∏≠ÂõΩ‰∏≠ÈÉ®
            map = L.map('map').setView([35.8617, 104.1954], 5);
            
            // Ê∑ªÂä†OpenStreetMapÂ∫ïÂõæ
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);
            
            // Ê∑ªÂä†ÊºîÂá∫Âú∞ÁÇπÊ†áËÆ∞
            updateMapMarkers(performances);
        }

        // Êõ¥Êñ∞Âú∞ÂõæÊ†áËÆ∞
        function updateMapMarkers(filteredPerformances) {
            // Ê∏ÖÈô§ÊâÄÊúâÁé∞ÊúâÊ†áËÆ∞
            if (markers) {
                Object.values(markers).forEach(markerGroup => {
                    markerGroup.clearLayers();
                });
            }
            markers = {};
            
            // ÊåâÂâßÈô¢ÂàÜÁªÑÊºîÂá∫
            const performancesByTheater = {};
            filteredPerformances.forEach(performance => {
                if (!performancesByTheater[performance.theater]) {
                    performancesByTheater[performance.theater] = [];
                }
                performancesByTheater[performance.theater].push(performance);
            });
            
            // ‰∏∫ÊØè‰∏™ÂâßÈô¢ÂàõÂª∫Ê†áËÆ∞ÁªÑ
            Object.entries(performancesByTheater).forEach(([theater, theaterPerformances]) => {
                const theaterLocation = theaterLocations[theater];
                if (theaterLocation) {
                    const markerGroup = L.layerGroup();
                    
                    // ÂàõÂª∫Ëá™ÂÆö‰πâÂõæÊ†á
                    const theaterIcon = L.divIcon({
                        className: 'theater-marker',
                        html: `<div style="background-color: #d23c3c; color: white; border-radius: 50%; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; font-weight: bold; border: 2px solid white; box-shadow: 0 0 5px rgba(0,0,0,0.3);">${theaterPerformances.length}</div>`,
                        iconSize: [30, 30],
                        iconAnchor: [15, 15]
                    });
                    
                    // Ê∑ªÂä†‰∏ªÊ†áËÆ∞
                    const marker = L.marker(theaterLocation, {
                        icon: theaterIcon,
                        title: theater
                    }).addTo(markerGroup);
                    
                    // ÁªëÂÆöÂºπÂá∫Á™óÂè£
                    let popupContent = `<b style="color:#d23c3c">${theater}</b><hr style="margin:5px 0">`;
                    theaterPerformances.forEach(p => {
                        popupContent += `
                            <div style="margin-bottom:8px;">
                                <div><strong>${p.title}</strong></div>
                                <div>${p.date} ${p.time}</div>
                                <div>Á•®‰ª∑: ${p.price}</div>
                                <a href="${p.link}" target="_blank" style="color:#d23c3c;font-size:0.9em;">Ë¥≠Á•®‰ø°ÊÅØ</a>
                            </div>
                        `;
                    });
                    
                    marker.bindPopup(popupContent, {
                        maxWidth: 300,
                        minWidth: 250
                    });
                    
                    // ÁÇπÂáªÊ†áËÆ∞Êó∂È´ò‰∫ÆÂØπÂ∫îÁöÑÂâßÈô¢ÂàóË°®È°π
                    marker.on('click', function() {
                        highlightTheaterItem(theater);
                    });
                    
                    // ‰øùÂ≠òÊ†áËÆ∞ÁªÑ
                    markers[theater] = markerGroup;
                    markerGroup.addTo(map);
                }
            });
            
            // Ê∏≤ÊüìÂâßÈô¢ÂàóË°®
            renderTheaterList(performancesByTheater);
            
            // Â¶ÇÊûúÊúâÊ†áËÆ∞ÔºåË∞ÉÊï¥ËßÜÂõæ‰ª•ÊòæÁ§∫ÊâÄÊúâÊ†áËÆ∞
            if (filteredPerformances.length > 0) {
                const locations = Object.keys(performancesByTheater)
                    .map(theater => theaterLocations[theater])
                    .filter(Boolean);
                
                if (locations.length > 0) {
                    const group = new L.featureGroup(locations);
                    map.fitBounds(group.getBounds().pad(0.2));
                }
            }
        }

        // Ê∏≤ÊüìÂâßÈô¢ÂàóË°®
        function renderTheaterList(performancesByTheater) {
            const theaterList = document.getElementById('theaterList');
            theaterList.innerHTML = '';
            
            // ‰∏∫ÊØè‰∏™ÂâßÈô¢ÂàõÂª∫ÂàóË°®È°π
            Object.entries(performancesByTheater).forEach(([theater, theaterPerformances]) => {
                const theaterItem = document.createElement('li');
                theaterItem.className = 'theater-item';
                theaterItem.dataset.theater = theater;
                theaterItem.innerHTML = `
                    <div class="theater-name">${theater}</div>
                    <div class="performance-count">
                        <span>${theaterPerformances.length}Âú∫ÊºîÂá∫</span>
                        <span>${theaterPerformances[0].date}</span>
                    </div>
                `;
                
                theaterItem.addEventListener('click', () => {
                    focusOnTheater(theater);
                });
                
                theaterList.appendChild(theaterItem);
            });
        }

        // È´ò‰∫ÆÂâßÈô¢ÂàóË°®È°π
        function highlightTheaterItem(theater) {
            document.querySelectorAll('.theater-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.theater === theater) {
                    item.classList.add('active');
                }
            });
        }

        // ËÅöÁÑ¶Âà∞ÁâπÂÆöÂâßÈô¢
        function focusOnTheater(theater) {
            // È´ò‰∫ÆÈÄâ‰∏≠ÁöÑÂâßÈô¢
            highlightTheaterItem(theater);
            
            // ÂÆö‰ΩçÂà∞ËØ•ÂâßÈô¢
            const location = theaterLocations[theater];
            if (location) {
                map.setView(location, 15);
                
                // ÊâìÂºÄËØ•ÂâßÈô¢ÁöÑÂºπÂá∫Á™óÂè£
                if (markers[theater]) {
                    markers[theater].eachLayer(layer => {
                        if (layer instanceof L.Marker) {
                            layer.openPopup();
                        }
                    });
                }
            }
        }

        // Ê∏≤ÊüìÂç°ÁâáËßÜÂõæ
        function renderCardView(performancesToRender) {
            const cardView = document.getElementById('cardView');
            cardView.innerHTML = '';
            
            if (performancesToRender.length === 0) {
                cardView.innerHTML = '<div class="alert alert-warning">Ê≤°ÊúâÊâæÂà∞Á¨¶ÂêàÊù°‰ª∂ÁöÑÊºîÂá∫</div>';
                return;
            }
            
            performancesToRender.forEach(performance => {
                const card = document.createElement('div');
                card.className = 'musical-card';
                card.innerHTML = `
                    <div class="flex-container">
                        <div class="flex-content">
                            <div class="musical-title">${performance.title}</div>
                            <div><strong>ÊºîÂá∫Êó∂Èó¥:</strong> ${performance.date} ${performance.time}</div>
                            <div class="theater-name">${performance.theater}</div>
                            <div><strong>Á•®‰ª∑:</strong> ${performance.price}</div>
                            <p style="margin: 10px 0;">${performance.description}</p>
                            <a href="${performance.link}" target="_blank" class="custom-button">Á´ãÂç≥Ë¥≠Á•®</a>
                        </div>
                        <div class="flex-img">
                            <img src="${performance.poster}" alt="${performance.title}Êµ∑Êä•" style="width: 100%; border-radius: 5px;">
                        </div>
                    </div>
                `;
                cardView.appendChild(card);
            });
        }

        // Ê∏≤ÊüìË°®Ê†ºËßÜÂõæ
        function renderTableView(performancesToRender) {
            const tableBody = document.getElementById('tableBody');
            tableBody.innerHTML = '';
            
            if (performancesToRender.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="5" style="text-align: center;">Ê≤°ÊúâÊâæÂà∞Á¨¶ÂêàÊù°‰ª∂ÁöÑÊºîÂá∫</td></tr>';
                return;
            }
            
            performancesToRender.forEach(performance => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${performance.title}</td>
                    <td>${performance.date}</td>
                    <td>${performance.time}</td>
                    <td>${performance.theater}</td>
                    <td>${performance.price}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Â∫îÁî®Á≠õÈÄâÊù°‰ª∂
        function applyFilters() {
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            const theater = document.getElementById('theaters').value;
            const priceRange = document.getElementById('priceRanges').value;
            const sortBy = document.getElementById('sortBy').value;
            
            let filteredPerformances = [...performances];
            
            // Êó•ÊúüÁ≠õÈÄâ
            if (startDate) {
                filteredPerformances = filteredPerformances.filter(p => p.date >= startDate);
            }
            if (endDate) {
                filteredPerformances = filteredPerformances.filter(p => p.date <= endDate);
            }
            
            // ÂâßÈô¢Á≠õÈÄâ
            if (theater !== 'all') {
                filteredPerformances = filteredPerformances.filter(p => p.theater === theater);
            }
            
            // Á•®‰ª∑Á≠õÈÄâ
            if (priceRange !== 'all') {
                filteredPerformances = filteredPerformances.filter(p => p.price === priceRange);
            }
            
            // ÊéíÂ∫è
            filteredPerformances.sort((a, b) => {
                switch (sortBy) {
                    case 'date_asc':
                        return a.date.localeCompare(b.date) || a.time.localeCompare(b.time);
                    case 'date_desc':
                        return b.date.localeCompare(a.date) || b.time.localeCompare(a.time);
                    case 'name_asc':
                        return a.title.localeCompare(b.title);
                    case 'name_desc':
                        return b.title.localeCompare(a.title);
                    case 'theater_asc':
                        return a.theater.localeCompare(b.theater);
                    case 'theater_desc':
                        return b.theater.localeCompare(a.theater);
                    default:
                        return 0;
                }
            });
            
            // Êõ¥Êñ∞ËÆ°Êï∞
            document.getElementById('performanceCount').textContent = `ÊâæÂà∞ ${filteredPerformances.length} Âú∫ÊºîÂá∫`;
            
            // ÈáçÊñ∞Ê∏≤ÊüìËßÜÂõæ
            renderCardView(filteredPerformances);
            renderTableView(filteredPerformances);
            
            // Êõ¥Êñ∞Âú∞ÂõæÊ†áËÆ∞ÂíåÂâßÈô¢ÂàóË°®
            if (document.getElementById('mapView').classList.contains('active')) {
                if (!map) {
                    initMap();
                } else {
                    updateMapMarkers(filteredPerformances);
                }
            }
        }

        // ÈáçÁΩÆÁ≠õÈÄâÊù°‰ª∂
        function resetFilters() {
            document.getElementById('startDate').value = '';
            document.getElementById('endDate').value = '';
            document.getElementById('theaters').value = 'all';
            document.getElementById('priceRanges').value = 'all';
            document.getElementById('sortBy').value = 'date_asc';
            
            applyFilters();
        }

        // ËΩÆÊí≠ÂõæÈÄªËæë
        let carouselPos = 0;
        const carouselInner = document.getElementById('carouselInner');
        const images = ['https://i.imgur.com/KUOhkeq.jpeg', 'https://i.imgur.com/3KAIyAH.jpeg', 'https://i.imgur.com/VUZF7sX.jpeg', 'https://i.imgur.com/wy2k5Qv.jpeg'];
        
        function rotateCarousel() {
            carouselPos = (carouselPos + 100) % (images.length * 100);
            carouselInner.style.transform = `translateX(-${carouselPos}%)`;
            setTimeout(rotateCarousel, 3000);
        }
        
        // ÈÄâÈ°πÂç°ÂàáÊç¢
        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabId).classList.add('active');
            event.currentTarget.classList.add('active');
            
            // Â¶ÇÊûúÂàáÊç¢Âà∞Âú∞ÂõæËßÜÂõæ‰∏îÂú∞ÂõæÊú™ÂàùÂßãÂåñÔºåÂàôÂàùÂßãÂåñÂú∞Âõæ
            if (tabId === 'mapView' && !map) {
                initMap();
            }
        }
        
        // Ë°®ÂçïÊèê‰∫§
        function submitForm() {
            const requiredFields = ['title', 'theater', 'date', 'time', 'price'];
            let isValid = true;
            
            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (!field.value) {
                    field.style.borderColor = 'red';
                    isValid = false;
                } else {
                    field.style.borderColor = '#ffd0d0';
                }
            });
            
            if (isValid) {
                // ÂàõÂª∫Êñ∞ÊºîÂá∫ÂØπË±°
                const newPerformance = {
                    id: performances.length + 1,
                    title: document.getElementById('title').value,
                    theater: document.getElementById('theater').value,
                    date: document.getElementById('date').value,
                    time: document.getElementById('time').value,
                    price: document.getElementById('price').value,
                    description: document.getElementById('description').value || 'ÊöÇÊó†ÁÆÄ‰ªã',
                    poster: document.getElementById('poster').value || 'https://via.placeholder.com/300x400?text=ÊöÇÊó†Êµ∑Êä•',
                    link: document.getElementById('link').value || '#',
                    location: theaterLocations[document.getElementById('theater').value] || [35.8617, 104.1954]
                };
                
                // Ê∑ªÂä†Âà∞ÊºîÂá∫Êï∞ÁªÑ
                performances.push(newPerformance);
                
                // Êõ¥Êñ∞ÂâßÈô¢‰ΩçÁΩÆ‰ø°ÊÅØÔºàÂ¶ÇÊûúÊñ∞ÂâßÈô¢‰∏çÂ≠òÂú®Ôºâ
                if (!theaterLocations[newPerformance.theater]) {
                    theaterLocations[newPerformance.theater] = [35.8617, 104.1954]; // ÈªòËÆ§‰∏≠ÂõΩ‰∏≠ÈÉ®
                }
                
                // ÈáçÁΩÆË°®Âçï
                document.getElementById('addPerformance').reset();
                
                // ÊòæÁ§∫ÊàêÂäüÊ∂àÊÅØ
                const successMsg = document.createElement('div');
                successMsg.className = 'alert alert-success';
                successMsg.textContent = `Â∑≤Ê∑ªÂä† "${newPerformance.title}" ÁöÑÊºîÂá∫‰ø°ÊÅØ!`;
                document.getElementById('addPerformance').appendChild(successMsg);
                
                // Êõ¥Êñ∞Á≠õÈÄâÁªìÊûú
                applyFilters();
                
                // 3ÁßíÂêéÁßªÈô§Ê∂àÊÅØ
                setTimeout(() => {
                    successMsg.remove();
                }, 3000);
            } else {
                const errorMsg = document.createElement('div');
                errorMsg.className = 'alert alert-error';
                errorMsg.textContent = 'ËØ∑Â°´ÂÜôÊâÄÊúâÂøÖÂ°´Â≠óÊÆµ(Ê†áÊúâ*)';
                document.getElementById('addPerformance').appendChild(errorMsg);
                
                // 3ÁßíÂêéÁßªÈô§Ê∂àÊÅØ
                setTimeout(() => {
                    errorMsg.remove();
                }, 3000);
            }
        }
        
        // ËÆæÁΩÆÊõ¥Êñ∞Êó•Êúü
        document.getElementById('updateDate').textContent = new Date().toLocaleDateString('zh-CN', {
            year: 'numeric',
            month: '2-digit',
            day: '2-digit'
        });
        
        // ÂàùÂßãÂåñÊó•ÊúüÈÄâÊã©Âô®
        const today = new Date();
        const nextMonth = new Date(today.getFullYear(), today.getMonth() + 1, 1);
        const lastDay = new Date(today.getFullYear(), today.getMonth() + 2, 0);
        
        document.getElementById('startDate').valueAsDate = today;
        document.getElementById('endDate').valueAsDate = lastDay;
        
        // ÂàùÂßãÂåñËΩÆÊí≠Âõæ
        setTimeout(rotateCarousel, 3000);
        
        // ÂàùÂßãÊ∏≤Êüì
        document.addEventListener('DOMContentLoaded', function() {
            renderCardView(performances);
            renderTableView(performances);
            applyFilters();
        });
    </script>
</body>
</html>